
function init_rooms(){$("#confirm_box").hide();$("#editRooms").prop("disabled",true);$("#rooms_table").DataTable({lengthMenu:[[-1,25,50],["All",25,50]],stateSave:false,order:[[1,"asc"]],aoColumnDefs:[{bSortable:false,aTargets:[0]}]});$(".delete-room").click(function(){var b=$(this).attr("data-id");var a="Are you sure you want to delete this room?<br>";$("#confirm_box").html(a);$("#confirm_box").dialog({modal:true,width:"auto",title:"Delete rooms",buttons:[{text:"Delete",click:function(){var c=$("#rooms").val();$.ajax({type:"POST",url:"ajax.php?action=deleteRoom&id="+b,dataType:"html",success:function(d){if(d=="ERROR-1451"){alert("This room cannot be deleted because it is linked to other rooms.")}else{location.reload()}}});$(this).dialog("close")},},{text:"cancel",click:function(){$(this).dialog("close")}}]})});$("#checkAll").click(function(){$("input:checkbox").prop("checked",$(this).prop("checked"));if($("input[name='id']").is(":checked")){$("#editRooms").removeAttr("disabled")}else{$("#editRooms").attr("disabled","disabled")}});$("input[name='id']").click(function(){if($(this).is(":checked")){$("#editRooms").removeAttr("disabled")}else{$("#editRooms").attr("disabled","disabled")}});$("#editRooms").click(function(){var a=$('input[name="id"]:checked').map(function(){return this.value}).get();$("#ids").val(a)});$("#assets").select2({width:400});$("#submitRoomEdits").click(function(){$.ajax({type:"POST",url:"ajax.php?action=updateRooms",data:$("#editRoomsForm").serialize(),dataType:"html",success:function(a){$("#room_table_container").html(a);init_rooms()}})})}function init_room(){$("#id_color").spectrum({showInput:true,allowEmpty:true,preferredFormat:"hex"});$("#id_roomtypeid").select2();$("#id_parentroomid").select2();$("#id_assets").select2()}function enableEditRooms(){};